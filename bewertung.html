<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Meflo â€“ Bewertung</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- Header -->
  <header class="header">
    <div class="logo-symbol" onclick="window.location.href='index.html'">
      <span class="sigil">â—†</span>
      <span class="name">MEFLO</span>
    </div>
  </header>

  <!-- Bewertung -->
  <main class="rating-view">
    <div class="rating-card">

      <h1>Wir wÃ¼rden uns sehr Ã¼ber eine Bewertung freuen</h1>
      <p>Wie fandest du die PrÃ¤sentation?</p>

      <div class="rating-stars" id="stars">
        <span data-value="1">â˜…</span>
        <span data-value="2">â˜…</span>
        <span data-value="3">â˜…</span>
        <span data-value="4">â˜…</span>
        <span data-value="5">â˜…</span>
      </div>

      <textarea
        placeholder="Optional: MÃ¶chtest du uns noch etwas mitteilen?"
        rows="4"
      ></textarea>

      <button id="submitBtn" disabled>Abschicken</button>

    </div>
  </main>

  <!-- ZurÃ¼ck -->
  <button class="back-btn" onclick="window.location.href='index.html'">
    â† ZurÃ¼ck zur Startseite
  </button>

  <script>
    let selectedRating = 0;
    const stars = document.querySelectorAll(".rating-stars span");
    const button = document.getElementById("submitBtn");

    stars.forEach(star => {
      star.addEventListener("mouseover", () => {
        highlightStars(star.dataset.value);
      });

      star.addEventListener("mouseout", () => {
        highlightStars(selectedRating);
      });

      star.addEventListener("click", () => {
        selectedRating = star.dataset.value;
        highlightStars(selectedRating);
        button.disabled = false;
      });
    });

    function highlightStars(count) {
      stars.forEach(star => {
        star.classList.toggle(
          "active",
          star.dataset.value <= count
        );
      });
    }

    button.addEventListener("click", async () => {
      if ("serviceWorker" in navigator) {
        const reg = await navigator.serviceWorker.ready;
        reg.showNotification("Meflo", {
          body: "Danke fÃ¼r deine Bewertung â­",
          icon: "icons/icon-192.png"
        });
      }

      button.textContent = "Danke ğŸ™Œ";
      button.disabled = true;
    });
  </script>

</body>
</html>
